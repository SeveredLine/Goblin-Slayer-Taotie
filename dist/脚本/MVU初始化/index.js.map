{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/四方世界/schema.ts","src://tavern_helper_template/四方世界/脚本/MVU初始化/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = _;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","import _ from 'lodash';\nimport { z } from 'zod';\n\n// --- 常量配置 ---\n// 1. 公会晋升等级配置\nconst RANK_CONFIG = [\n  { rank: '白金', cv: Infinity },\n  { rank: '金', cv: 3000 },\n  { rank: '银', cv: 2450 },\n  { rank: '青铜', cv: 1650 },\n  { rank: '红玉', cv: 1050 },\n  { rank: '翠玉', cv: 600 },\n  { rank: '青玉', cv: 300 },\n  { rank: '钢铁', cv: 200 },\n  { rank: '黑曜石', cv: 100 },\n  { rank: '白瓷', cv: 0 }\n];\n\n// 2. 技能等级进阶链与熟练度权重\nconst SKILL_LEVELS = ['初级', '中级', '高级', '精通', '大师'];\nconst SKILL_WEIGHTS = {\n  '初级': 1.0,\n  '中级': 0.8,\n  '高级': 0.5,\n  '精通': 0.25,\n  '大师': 0.1\n};\n\n// 3. 历练进度增长配置\nconst PROGRESS_TIERS = [\n  { min: 1, max: 1, bonus: 10 },\n  { min: 2, max: 3, bonus: 25 },\n  { min: 4, max: 5, bonus: 15 },\n  { min: 6, max: 9, bonus: 10 },\n  { min: 10, max: 15, bonus: 5 },\n  { min: 16, max: Infinity, bonus: 1 }\n];\n\n// --- 辅助逻辑 ---\nconst updateResourceWithDelta = (resource: any, newMaxCalculated: number) => {\n  const oldMax = resource.最大值 || 0;\n  const newMax = Math.max(0, newMaxCalculated);\n  const oldCurrent = resource.当前值;\n\n  if (oldMax === 0 || oldCurrent === null) {\n    resource.最大值 = newMax;\n    resource.当前值 = newMax;\n    return;\n  }\n\n  if (newMax !== oldMax) {\n    const diff = newMax - oldMax;\n    resource.最大值 = newMax;\n    let newCurrent = (oldCurrent || 0) + diff;\n    newCurrent = Math.max(0, Math.min(newMax, newCurrent));\n    resource.当前值 = newCurrent;\n  } else if (oldCurrent > newMax) {\n        resource.当前值 = newMax;\n    }\n};\n\nconst normalizeRankName = (rank: string) => {\n  if (!rank || typeof rank !== 'string') return '白瓷';\n  const normalized = rank.replace(/级$/, '').replace(/等级$/, '');\n  const rankMapping: Record<string, string> = {\n    '黄金': '金', '黄金级': '金', '金级': '金', '黄金等级': '金', '金等级': '金',\n    '白银': '银', '白银级': '银', '银级': '银', '白银等级': '银', '银等级': '银',\n    '黑曜': '黑曜石', '黑曜级': '黑曜石', '黑曜石级': '黑曜石', '黑曜等级': '黑曜石', '黑曜石等级': '黑曜石',\n    '白金级': '白金', '青铜级': '青铜', '红玉级': '红玉', '翠玉级': '翠玉', '青玉级': '青玉', '钢铁级': '钢铁', '白瓷级': '白瓷',\n    '白金等级': '白金', '青铜等级': '青铜', '红玉等级': '红玉', '翠玉等级': '翠玉', '青玉等级': '青玉', '钢铁等级': '钢铁', '白瓷等级': '白瓷',\n    '准金级': '准金级', '准金': '准金级'\n  };\n  if (rankMapping[normalized]) return rankMapping[normalized];\n  const validRank = RANK_CONFIG.find(r => r.rank === normalized);\n  if (validRank) return normalized;\n  return '白瓷';\n};\n\nconst normalizeRelationTier = (tier: string) => {\n  if (!tier || typeof tier !== 'string') return '白瓷';\n  const normalized = tier.replace(/级$/, '').replace(/等级$/, '');\n  const tierMapping: Record<string, string> = {\n    '白瓷': '白瓷', '黑曜石': '黑曜石', '青玉': '青玉', '翠玉': '翠玉',\n    '红玉': '红玉', '青铜': '青铜', '白银': '白银', '黄金': '黄金',\n    '白金': '白金', '准金级': '准金级', '准金': '准金级'\n  };\n  if (tierMapping[tier]) return tierMapping[tier];\n  for (const [key, value] of Object.entries(tierMapping)) {\n    if (tier.includes(key) || key.includes(tier)) return value;\n  }\n  return '白瓷';\n};\n\nconst getProgressBonus = (attributeValue: number) => {\n  for (const tier of PROGRESS_TIERS) {\n    if (attributeValue >= tier.min && attributeValue <= tier.max) return tier.bonus;\n  }\n  return 1;\n};\n\nconst handleAttributeGrowth = (data: any) => {\n  const SEVEN_ATTRIBUTES = ['力量', '敏捷', '感知', '知识', '魅力', '魔力', '信仰力'];\n  SEVEN_ATTRIBUTES.forEach(attr => {\n    if (data.历练进度 && data.历练进度[attr] !== undefined) {\n      if (data.历练进度[attr] >= 100) {\n        const currentValue = data.能力[attr] || 0;\n        data.能力[attr] = currentValue + 1;\n        data.历练进度[attr] = 0;\n      }\n    }\n  });\n  return data;\n};\n\nconst handleJobLevelUp = (data: any) => {\n  let skillPoints = data.技能点 || 0;\n  const jobs = data.职业 || {};\n  let totalLevelUps = 0;\n\n  _.forOwn(jobs, (job: any, jobName: string) => {\n    if (job && typeof job === 'object' && job !== '待初始化') {\n      if (!job.升级所需 || job.升级所需 === 0) job.升级所需 = 1000;\n      const oldLevel = job.当前等级 || 1;\n      const maxLevel = job.最大等级 || 10;\n      let levelUps = 0;\n      let remainingExp = job.当前经验 || 0;\n      let currentRequirement = job.升级所需;\n\n      while (remainingExp >= currentRequirement && (oldLevel + levelUps) < maxLevel) {\n        levelUps++;\n        remainingExp -= currentRequirement;\n        currentRequirement += 1000;\n      }\n      if (levelUps > 0) {\n        job.当前等级 = oldLevel + levelUps;\n        job.当前经验 = Math.max(0, remainingExp);\n        job.升级所需 = currentRequirement;\n        skillPoints += levelUps;\n        totalLevelUps += levelUps;\n      }\n    }\n  });\n\n  data.技能点 = skillPoints;\n  if (totalLevelUps > 0) data.经验等级 = (data.经验等级 || 1) + totalLevelUps;\n  return data;\n};\n\nconst updateProgress = (data: any, usedAttributes: string[] = []) => {\n  const attributesToUpdate = usedAttributes.length > 0 ? usedAttributes :\n    ['力量', '敏捷', '感知', '知识', '魅力', '魔力', '信仰力'];\n  if (!data.历练进度) data.历练进度 = {};\n  attributesToUpdate.forEach(attr => {\n    if (data.历练进度[attr] === undefined) data.历练进度[attr] = 0;\n    const attributeValue = data.能力[attr] || 0;\n    const bonusPercent = getProgressBonus(attributeValue);\n    data.历练进度[attr] = Math.min(100, (data.历练进度[attr] || 0) + bonusPercent);\n  });\n  return data;\n};\n\n// --- 基础 Schema 定义 ---\nconst ItemSchema = z.object({\n  name: z.string().prefault('未命名物品'),\n  type: z.string().prefault('杂物'),\n  tier: z.string().prefault('普通'),\n  part: z.string().prefault(''),\n  description: z.string().prefault(''),\n  armor_value: z.coerce.number().prefault(0),\n  attributes_bonus: z.record(z.string(), z.coerce.number()).prefault({}),\n  hands: z.string().prefault('单手'),\n  special_effects: z.record(z.string(), z.string()).prefault({}),\n  quantity: z.coerce.number().prefault(1)\n}).or(z.literal('待初始化')).prefault('待初始化');\n\nconst ResourceSchema = (defaultValue: number | null = null) => z.object({\n  当前值: z.coerce.number().nullable().prefault(defaultValue),\n  最大值: z.coerce.number().nullable().prefault(defaultValue)\n}).prefault({});\n\nconst InventorySchema = z.object({\n  武器: z.record(z.string(), ItemSchema).prefault({}),\n  防具: z.record(z.string(), ItemSchema).prefault({}),\n  饰品: z.record(z.string(), ItemSchema).prefault({}),\n  消耗品: z.record(z.string(), ItemSchema).prefault({}),\n  材料: z.record(z.string(), ItemSchema).prefault({}),\n  杂物: z.record(z.string(), ItemSchema).prefault({}),\n  金钱: z.object({\n    金币: z.coerce.number().prefault(0),\n    银币: z.coerce.number().prefault(0),\n    铜币: z.coerce.number().prefault(0)\n  }).prefault({})\n}).prefault({});\n\nconst ProgressSchema = z.object({\n  力量: z.coerce.number().transform(v => Math.max(0, Math.min(100, v))).prefault(0),\n  敏捷: z.coerce.number().transform(v => Math.max(0, Math.min(100, v))).prefault(0),\n  感知: z.coerce.number().transform(v => Math.max(0, Math.min(100, v))).prefault(0),\n  知识: z.coerce.number().transform(v => Math.max(0, Math.min(100, v))).prefault(0),\n  魅力: z.coerce.number().transform(v => Math.max(0, Math.min(100, v))).prefault(0),\n  魔力: z.coerce.number().transform(v => Math.max(0, Math.min(100, v))).prefault(0),\n  信仰力: z.coerce.number().transform(v => Math.max(0, Math.min(100, v))).prefault(0)\n}).prefault({});\n\n// --- 主 Schema 导出 ---\nexport const Schema = z.object({\n  \"世界\": z.object({\n    当前时间: z.string().prefault('战后十年/初醒之月/第一日'),\n    世界动向: z.string().prefault('暂无重大动向'),\n    城市趣闻: z.string().prefault('暂无趣闻'),\n    冒险逸闻: z.string().prefault('暂无逸闻')\n  }).prefault({}),\n\n  \"主角\": z.object({\n    姓名: z.string().prefault('{{user}}'),\n    所在地: z.string().nullable().prefault(null),\n    坐标: z.object({ x: z.coerce.number().prefault(0), y: z.coerce.number().prefault(0) }).prefault({}),\n    职业: z.record(z.string(), z.object({\n      当前等级: z.coerce.number().prefault(1),\n      最大等级: z.coerce.number().prefault(10),\n      当前经验: z.coerce.number().prefault(0),\n      升级所需: z.coerce.number().prefault(1000)\n    }).or(z.literal('待初始化'))).prefault({}),\n    经验等级: z.coerce.number().prefault(1),\n    技能点: z.coerce.number().prefault(0),\n    种族: z.string().nullable().prefault('人类'),\n    能力: z.object({\n      力量: z.coerce.number().transform(v => Math.max(0, v)).prefault(5),\n      敏捷: z.coerce.number().transform(v => Math.max(0, v)).prefault(5),\n      感知: z.coerce.number().transform(v => Math.max(0, v)).prefault(5),\n      知识: z.coerce.number().transform(v => Math.max(0, v)).prefault(5),\n      魅力: z.coerce.number().transform(v => Math.max(0, v)).prefault(5),\n      魔力: z.coerce.number().transform(v => Math.max(0, v)).prefault(0),\n      信仰力: z.coerce.number().transform(v => Math.max(0, v)).prefault(0)\n    }).prefault({}),\n    生命值: ResourceSchema(),\n    护甲值: ResourceSchema(0),\n    魔力值: ResourceSchema(),\n    信仰力值: ResourceSchema(),\n    体力值: ResourceSchema(),\n    历练进度: ProgressSchema,\n    装备: z.object({\n      武器: z.record(z.string(), ItemSchema).prefault({}),\n      防具: z.record(z.string(), ItemSchema).prefault({}),\n      饰品: z.record(z.string(), ItemSchema).transform((data: any) => {\n          const rings = _.entries(data).filter(([_, v]: [string, any]) => (v?.type === '戒指'));\n          if (rings.length > 2) {\n            const keysToRemove = rings.slice(0, rings.length - 2).map(([k]) => k);\n            return _.omit(data, keysToRemove);\n          }\n          return data;\n      }).prefault({})\n    }).prefault({}),\n    技能列表: z.record(z.string(), z.object({\n      type: z.string().prefault('主动'),\n      tier: z.string().prefault('T1'),\n      level: z.string().prefault('初级'),\n      熟练度: z.coerce.number().transform(v => _.clamp(v, 0, 100)).prefault(0),\n      efficiency: z.coerce.number().prefault(1.0),\n      description: z.string().prefault(''),\n      effect: z.string().prefault(''),\n      cost: z.string().prefault('')\n    }).or(z.literal('待初始化'))).prefault({}),\n    资产: z.record(z.string(), z.object({\n      名称: z.string().prefault(''),\n      位置: z.string().prefault(''),\n      整体介绍: z.string().prefault(''),\n      内部结构布局: z.string().prefault('')\n    }).or(z.literal('待初始化'))).prefault({}),\n    当前状态: z.record(z.string(), z.object({\n      description: z.string().prefault(''),\n      level: z.string().prefault('1'),\n      attributes_bonus: z.record(z.string(), z.coerce.number()).prefault({}),\n      type: z.string().prefault('临时')\n    }).or(z.literal('待初始化'))).prefault({}),\n    任务日志: z.object({\n      进行中: z.record(z.string(), z.any()).prefault({}),\n      已完成: z.record(z.string(), z.any()).prefault({})\n    }).prefault({}),\n    背包: InventorySchema,\n    公会信息: z.object({\n      所属公会: z.string().prefault('无'),\n      公会阶级: z.string().transform(rank => normalizeRankName(rank)).prefault('白瓷'),\n      当前贡献度: z.coerce.number().prefault(0)\n    }).prefault({})\n  }).transform((data: any) => {\n    data = handleAttributeGrowth(data);\n    data = handleJobLevelUp(data);\n    data.公会信息.公会阶级 = normalizeRankName(data.公会信息.公会阶级);\n    _.forOwn(data.技能列表, (skill: any) => {\n      if (skill && typeof skill === 'object' && skill !== '待初始化') {\n        if (skill.熟练度 >= 100) {\n          const currentIndex = SKILL_LEVELS.indexOf(skill.level);\n          if (currentIndex !== -1 && currentIndex < SKILL_LEVELS.length - 1) {\n            skill.level = SKILL_LEVELS[currentIndex + 1];\n            skill.熟练度 = 0;\n          } else {\n            skill.熟练度 = 100;\n          }\n        }\n        skill.efficiency = SKILL_WEIGHTS[skill.level as keyof typeof SKILL_WEIGHTS] ?? 1.0;\n      }\n    });\n    const s = data.能力;\n    updateResourceWithDelta(data.生命值, 10 + (s.力量 || 0) * 5 + (s.感知 || 0) * 2);\n    updateResourceWithDelta(data.体力值, 5 + (s.敏捷 || 0) + (s.力量 || 0));\n    updateResourceWithDelta(data.魔力值, s.魔力 || 0);\n    updateResourceWithDelta(data.信仰力值, s.信仰力 || 0);\n    const allEquips = [..._.values(data.装备.武器), ..._.values(data.装备.防具), ..._.values(data.装备.饰品)];\n    const calcMaxArmor = allEquips.reduce((sum, i: any) => sum + (i?.armor_value || 0), 0);\n    data.护甲值.最大值 = calcMaxArmor;\n    if (data.护甲值.当前值 === null) data.护甲值.当前值 = calcMaxArmor;\n\n    return data;\n  }).prefault({}),\n\n  \"关系列表\": z.record(z.string(), z.object({\n    姓名: z.string().prefault(''),\n    职业: z.union([z.string(), z.record(z.string(), z.any())]).prefault('未知'),\n    职业等级: z.coerce.number().prefault(1),\n    种族: z.string().prefault(''),\n    is_companion: z.boolean().prefault(false),\n    在场: z.boolean().prefault(false),\n    好感度: z.union([z.coerce.number(), z.record(z.string(), z.coerce.number())]).prefault(0),\n    信任度: z.union([z.coerce.number(), z.record(z.string(), z.coerce.number())]).prefault(0),\n    能力: z.object({\n        力量: z.coerce.number().prefault(5),\n        敏捷: z.coerce.number().prefault(5),\n        感知: z.coerce.number().prefault(5),\n        知识: z.coerce.number().prefault(5),\n        魅力: z.coerce.number().prefault(5),\n        魔力: z.coerce.number().prefault(0),\n        信仰力: z.coerce.number().prefault(0)\n    }).prefault({}),\n    装备: z.object({\n        武器: z.record(z.string(), ItemSchema).prefault({}),\n        防具: z.record(z.string(), ItemSchema).prefault({}),\n        饰品: z.record(z.string(), ItemSchema).prefault({})\n    }).prefault({}),\n    背包: InventorySchema,\n    技能列表: z.record(z.string(), z.any()).prefault({}),\n    生命值: ResourceSchema(),\n    护甲值: ResourceSchema(0),\n    魔力值: ResourceSchema(),\n    信仰力值: ResourceSchema(),\n    体力值: ResourceSchema(),\n    公会信息: z.object({\n      所属公会: z.string().prefault('无'),\n      公会阶级: z.string().transform(rank => normalizeRankName(rank)).prefault('无阶级'),\n      当前贡献度: z.coerce.number().prefault(0)\n    }).prefault({}),\n    身份背景: z.string().prefault(''),\n    性格标签: z.record(z.string(), z.boolean()).prefault({}),\n    外貌: z.string().prefault(''),\n    称呼: z.string().prefault(''),\n    \"与主角关系\": z.string().prefault(''),\n    层级: z.string().transform(tier => normalizeRelationTier(tier)).prefault('白瓷'),\n    历练进度: ProgressSchema,\n    性档案: z.object({\n      私处叙述: z.string().prefault(''),\n      阴道结构叙述: z.string().prefault(''),\n      体位及次数: z.record(z.string(), z.coerce.number()).prefault({}),\n      技巧评价: z.string().prefault(''),\n      与主角意愿: z.string().prefault(''),\n      通用性癖好: z.string().prefault(''),\n      受孕与内射意愿: z.string().prefault('')\n    }).prefault({}),\n    所处地点: z.string().prefault(''),\n    重要记忆: z.record(z.string(), z.string()).prefault({})\n  }).transform((data: any) => {\n    if (data.能力) {\n        const s = data.能力;\n        updateResourceWithDelta(data.生命值, 10 + (s.力量 || 0) * 5 + (s.感知 || 0) * 2);\n        updateResourceWithDelta(data.体力值, 5 + (s.敏捷 || 0) + (s.力量 || 0));\n        updateResourceWithDelta(data.魔力值, s.魔力 || 0);\n        updateResourceWithDelta(data.信仰力值, s.信仰力 || 0);\n    }\n    if (data.装备) {\n        const allEquips = [..._.values(data.装备.武器), ..._.values(data.装备.防具), ..._.values(data.装备.饰品)];\n        const maxArmor = allEquips.reduce((sum, i: any) => sum + (i?.armor_value || 0), 0);\n        data.护甲值.最大值 = maxArmor;\n        if (data.护甲值.当前值 === null) data.护甲值.当前值 = maxArmor;\n    }\n    if (data.公会信息 && data.公会信息.公会阶级) data.公会信息.公会阶级 = normalizeRankName(data.公会信息.公会阶级);\n    return data;\n  }).or(z.literal('待初始化'))).prefault({}),\n\n  \"敌人列表\": z.record(z.string(), z.object({\n    类型: z.string().prefault('人形'),\n    生命值: ResourceSchema(),\n    护甲值: ResourceSchema(0),\n    能力: z.record(z.string(), z.coerce.number()).prefault({}),\n    备注: z.string().prefault('')\n  }).transform((data: any) => {\n      if (data.生命值.当前值 === null && data.生命值.最大值 !== null) data.生命值.当前值 = data.生命值.最大值;\n      return data;\n  }).or(z.literal('待初始化'))).prefault({}),\n\n  \"地图位标\": z.record(z.string(), z.object({\n    名称: z.string().nullable().prefault(null),\n    坐标: z.object({ x: z.coerce.number().prefault(0), y: z.coerce.number().prefault(0) }).prefault({}),\n    类型: z.string().prefault('调查'),\n    临时: z.boolean().prefault(false),\n    概况: z.string().nullable().prefault(null)\n  }).or(z.literal('待初始化'))).prefault({})\n});\n\nexport const updateCharacterProgress = (characterData: any, usedAttributes: string[] = []) => {\n  return updateProgress(characterData, usedAttributes);\n};","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nimport { Schema } from '../../schema';\n\n$(() => {\n  registerMvuSchema(Schema);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","_","z","RANK_CONFIG","rank","cv","Infinity","SKILL_LEVELS","SKILL_WEIGHTS","updateResourceWithDelta","resource","newMaxCalculated","oldMax","newMax","Math","max","oldCurrent","diff","newCurrent","min","normalizeRankName","normalized","replace","rankMapping","find","r","ItemSchema","object","name","string","prefault","type","tier","part","description","armor_value","coerce","number","attributes_bonus","record","hands","special_effects","quantity","or","literal","ResourceSchema","defaultValue","nullable","InventorySchema","ProgressSchema","transform","v","Schema","x","y","data","rings","filter","length","keysToRemove","slice","map","k","level","efficiency","effect","cost","any","skillPoints","jobs","totalLevelUps","job","jobName","oldLevel","maxLevel","levelUps","remainingExp","currentRequirement","handleJobLevelUp","forEach","attr","undefined","currentValue","handleAttributeGrowth","skill","currentIndex","indexOf","s","calcMaxArmor","reduce","sum","i","union","is_companion","boolean","tierMapping","value","entries","includes","normalizeRelationTier","maxArmor","$"],"sourceRoot":""}