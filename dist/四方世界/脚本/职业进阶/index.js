var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=_;var n=e.n(t);const $=window.$,a={type:'message',message_id:'latest'},r=async(e,t,n,r,o)=>{try{const s={...r};delete s[e],s[t]={当前等级:1,最大等级:10,当前经验:0,升级所需:1e3,advancement_from:e,advancement_level:n},window.setVariable('stat_data.主角.职业',s,a),window.setVariable('stat_data.主角.技能列表',o,a);const i=(e=>Object.entries(e).map(([e,t])=>'object'==typeof t&&null!==t?`${e}: 等级${t.当前等级||1} (经验: ${t.当前经验||0}/${t.升级所需||1e3})`:`${e}: ${t}`).join('\n'))(s),c=(e=>Object.entries(e).map(([e,t])=>'object'==typeof t&&null!==t?`${e}: ${t.level||'初级'} (熟练度: ${t.熟练度||0}%, 效率: ${t.efficiency||1})`:`${e}: ${t}`).join('\n'))(o),d=`角色职业进阶：从 ${e}(等级${n}) 进阶为 ${t}\n\n前置职业等级：${n}\n\n当前所有职业状态：\n${i}\n\n当前所有技能状态：\n${c}\n\n进阶强度判断依据：前置职业等级${n}，请根据此信息以及当前职业和技能状态决定新职业的具体强度和特性。`;return await window.triggerSlash(`/sys ${d}`),window.toastr.success(`成功进阶为 ${t}！`),!0}catch(e){return console.error('[职业进阶] 执行失败',e),window.toastr.error('职业进阶失败：'+e.message),!1}};$(()=>{window.eventOn('slashCommand',async e=>{if('职业进阶'===e.command)try{const[t,o]=e.args.split(':');if(!t||!o)return void window.toastr.error('职业进阶参数错误');const s=window.getVariables(a),i=(e=>n().get(e,'stat_data.主角.职业',n().get(e,'主角.职业',{})))(s),c=(e=>n().get(e,'stat_data.主角.技能列表',n().get(e,'主角.技能列表',{})))(s),d=i[t]?.当前等级||1;await r(t,o,d,i,c)}catch(e){console.error('[职业进阶] 执行失败',e),window.toastr.error('职业进阶失败，请查看控制台')}})});
//# sourceMappingURL=index.js.map