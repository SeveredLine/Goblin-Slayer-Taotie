var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=_;var o=t.n(e);const a='技能学习',r={type:'message',message_id:'latest'};$(()=>{(async()=>{try{await window.triggerSlash(`/buttons ${a}`)}catch(t){console.error('[技能学习] 显示按钮失败',t)}})(),window.eventOn(window.getButtonEvent(a),async()=>{try{const t=window.getVariables(r),e=(t=>{const e=o().get(t,'stat_data.主角.技能点',o().get(t,'主角.技能点',0));return Number(e)||0})(t),a=(t=>o().has(t,'stat_data.主角.技能点')?'stat_data.主角.技能点':o().has(t,'主角.技能点')?'主角.技能点':'stat_data.主角.技能点')(t);if(e<=0)return void window.toastr.warning('技能点不足，无法学习新技能');const n=window.prompt('输入要学习的技能名（键名）：','');if(!n)return;const s=`stat_data.主角.技能列表.${n}`;if(o().get(t,s))return void window.toastr.info(`技能「${n}」已存在，未消耗技能点`);const i=window.prompt('输入技能描述（可留空）：','')||'',w={type:'主动',level:'初级',熟练度:0,efficiency:1,description:i,cost:window.prompt('输入技能消耗（可留空）：','无')||'无'};window.setVariable(a,Math.max(0,e-1),r),window.setVariable(s,w,r),window.toastr.success(`已学习技能「${n}」，消耗 1 技能点`)}catch(t){console.error('[技能学习] 学习失败',t),window.toastr.error('学习技能失败，请查看控制台')}})});
//# sourceMappingURL=index.js.map